<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<!-- Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *      
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License
-->
        <ModulePrefs title="Hangout Starter">
                <Require feature="rpc" />
                <Require feature="views"/>
        </ModulePrefs>
        <Content type="html"><![CDATA[
        <!DOCTYPE html>
     
<link href='//fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'></link>
<link href='//rawgit.com/jcambre/CS247-P4/mod/style.css' rel='stylesheet' type='text/css'></link>
<script src='//cdn.firebase.com/js/client/1.0.6/firebase.js'></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="//code.highcharts.com/highcharts.js"></script>
<script src="//code.highcharts.com/highcharts-more.js"></script>
<script src="//plus.google.com/hangouts/_/api/v1/hangout.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src='//rawgit.com/jcambre/CS247-P4/moderator/firebase_setup.js'></script>
<script src='//rawgit.com/jcambre/CS247-P4/mod/turn-taking.js'></script>
<script src='//rawgit.com/jcambre/CS247-P4/mod/breakout.js'></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>


<html>
<div id="container" style="position:relative; width:100%;">



  <div id="show_panel">
    <span id="show_panel_label" style="font-size: 10pt;">Show Think-Pair-Share&#9660;</span>
  </div>
  <div id="panel_container_wrapper" style="overflow:scroll; position:relative;">
    <div id="panel_container">
      <a id="hide_panel" style="float:right; font-size:14pt; padding: 5px; text-decoration:none; color:#00000; cursor: pointer;" title="Hide Participation Metrics">&times;</a>
      <div id="visualization_container">
        <p id="instructions">In a moment, your instructor will begin the discussion. First, you will be asked to <b>think</b> individually about a short prompt. Then, you will be automatically <b>paired</b> with another student to discuss the same prompt. Finally, the discussion will return to the entire group, and everyone will have a chance to <b>share</b> what they discussed with their partners.</p>
        <!-- Only display this if the individual is an admin (Kyle, Julia, Will) -->
        <div id="tps_buttons"></div>
        <br/><br/>
        <h4>Current Phase:</h4>
        <p class="lead" id="phase_label">
          <span id="pending_participants">
            Waiting for <span id="num_participants_needed"></span> more participants to begin the discussion!
          </span>
        </p>
        <div id="timer_wrapper" style="display:none;">
          <h4>Remaining time in this phase:</h4>
          <span class="lead" id="timer_label"></span><br/>
        </div>
        <div class="alert alert-warning alert-dismissable">
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
          <strong>Heads up!</strong> Your instructor will be able to monitor your audio/video feeds at all times, including when they appear hidden to you during the Think and Pair phases, so don't do anything too embarrassing!
        </div>
        <hr/>
        <div id="pair_wrapper">
          <strong>Pair groups</strong>
          <ul id="pairs" class="list-unstyled">
            <li><button id="listen_all" type="button" class="btn btn-success disabled btn-xs" onclick="listenToAll();">Listen to all pairs</button></li>
          </ul>
        </div>
        <div id="graph_buttons" style="display: none;"></div>
        <div id="graph_container" style="min-width: 300px; width: 400px; max-width: 500px; height: 380px; margin: 0 auto; position: relative; float: right; display: none;"></div>

      </div>
    </div>
  </div>
  

</div>
</html>

<script>
  gapi.hangout.onApiReady.add(
    function(eventObj) {
      $('#hide_panel').click(function() {
        hidePanel();
      });
      $('#show_panel').click(function() {
        showPanel();
      });

      // If the current participants are "administrators" (acting as instructors for the purposes of the demo), give them access to the Start/Stop discussion buttons
      var localParticipantId = gapi.hangout.getLocalParticipant().person.id;
      console.log("My local participant ID is: " + localParticipantId);
      if (localParticipantId == "111880716844037207882" || localParticipantId == "wjkchid@gmail.com" || localParticipantId == "kdumovic@gmail.com") {
        document.getElementById("tps_buttons").innerHTML = '<center><button type="button" class="btn btn-success" id="start_tps_btn">Start Think-Pair-Share</button><button type="button" class="btn btn-success" id="enable_intercom_btn" style="display:none;">Use the Intercom</button><button type="button" class="btn btn-danger" id="disable_intercom_btn" style="display:none;">Turn Off Intercom</button><button type="button" class="btn btn-primary" id="restart_tps_btn" style="display:none;">Restart Think-Pair-Share</button></center>';
        document.getElementById("graph_buttons").innerHTML = '<center><button type="button" class="btn btn-success" id="start_graph_btn">Start Graphing</button><button type="button" class="btn btn-primary" id="end_graph_btn" style="display:none;">End Graphing</button></center>';
      }

      $('#start_tps_btn').click(function() {
        startTPS();
      });
      $('#restart_tps_btn').click(function() {
        restartTPS();
      });

      $('#activate_intercom_btn').click(function() {
        activateIntercom();
      });
      $('#disable_intercom_btn').click(function() {
        disableIntercom();
      });

      $('#start_graph_btn').click(function() {
        startGraphing();
      });
      $('#restart_graph_btn').click(function() {
        endGraphing();
      });
    }
  );
</script>
]]>
</Content>
</Module>